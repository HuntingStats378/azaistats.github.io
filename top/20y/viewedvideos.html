<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Top 50 Videos â€“ 20 Years Ago</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 40px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
    }
    .video-card, .user-item {
      background: white;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    .rank, .user-name {
      font-size: 1.2em;
      font-weight: bold;
    }
    .title, .user-total-views {
      color: #666;
      font-size: 0.9em;
    }
    .thumbnail {
      width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 5px;
    }
    .creator {
      color: #777;
      font-size: 0.9em;
      margin-top: 5px;
    }
    .link {
      display: block;
      text-align: center;
      margin-top: 20px;
      font-size: 1.1em;
    }
    .btn-toggle {
      margin: 20px 0;
      padding: 10px;
      background: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 1.1em;
      width: 100%;
      border-radius: 5px;
    }
    .btn-toggle:hover {
      background-color: #45a049;
    }
    .container {
      display: none;
    }
  </style>
</head>
<body>

<h1>Top 50 Most Viewed Videos and Users - 20 Years Ago (Live)</h1>

<button class="btn-toggle" id="toggleButton">Switch to Most Viewed Users</button>

<div id="videosContainer" class="container">
  <div class="grid" id="videoGrid"></div>
</div>

<div id="usersContainer" class="container">
  <ul class="user-list" id="userList"></ul>
</div>

<script>
  const videos = [
    {
      id: "vid1",
      title: "Space Cat Rave",
      creator: "John Doe",
      thumbnail: "https://placekitten.com/320/180",
      views: [
        { timestamp: "2005-04-22T00:00:00Z", count: 1_000_000_000 },
        { timestamp: "2005-04-23T00:00:00Z", count: 10_000_000_000 }
      ]
    },
    {
      id: "vid2",
      title: "Banana Slip Fail",
      creator: "Jane Smith",
      thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Banana-Single.jpg/320px-Banana-Single.jpg",
      views: [
        { timestamp: "2005-04-22T00:00:00Z", count: 5_000_000_000 },
        { timestamp: "2005-04-23T12:00:00Z", count: 12_000_000_000 }
      ]
    },
    {
      id: "vid3",
      title: "Ultimate Fart Compilation",
      creator: "FartMaster3000",
      thumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Wind_cloud.jpg/320px-Wind_cloud.jpg",
      views: [
        { timestamp: "2005-04-22T12:00:00Z", count: 9_000_000_000 },
        { timestamp: "2005-04-23T18:00:00Z", count: 11_000_000_000 }
      ]
    }
  ];

  // Calculate user total views
  const users = {};

  videos.forEach(video => {
    if (!users[video.creator]) {
      users[video.creator] = 0;
    }
    // Sum views of each video for the user
    video.views.forEach(view => {
      users[video.creator] += view.count;
    });
  });

  // Sort users by total views (descending)
  const sortedUsers = Object.entries(users)
    .sort((a, b) => b[1] - a[1]) // Ensure descending order
    .map(([creator, totalViews]) => ({ creator, totalViews }));

  const containerVideos = document.getElementById('videosContainer');
  const containerUsers = document.getElementById('usersContainer');
  const toggleButton = document.getElementById('toggleButton');
  const videoGrid = document.getElementById('videoGrid');
  const userList = document.getElementById('userList');
  
  // Show videos by default
  containerVideos.style.display = 'block';

  // Function to render the videos list
  function renderVideos() {
    videoGrid.innerHTML = '';

    // Sort videos by views (descending)
    const rankedVideos = videos.sort((a, b) => {
      const totalA = a.views.reduce((acc, view) => acc + view.count, 0);
      const totalB = b.views.reduce((acc, view) => acc + view.count, 0);
      return totalB - totalA; // Ensure descending order
    });

    rankedVideos.forEach((video, index) => {
      const card = document.createElement('div');
      card.className = 'video-card';
      const imgId = `thumb-${video.id}`;
      
      card.innerHTML = `
        <div class="rank">#${String(index + 1).padStart(2, '0')}</div>
        <img id="${imgId}" src="${video.thumbnail}" class="thumbnail" alt="Thumbnail">
        <div class="title">${video.title}</div>
        <div class="views">${video.views.reduce((acc, v) => acc + v.count, 0).toLocaleString()} views</div>
        <div class="creator">Made by: ${video.creator}</div>
      `;
      videoGrid.appendChild(card);
    });
  }

  // Function to render the users list
  function renderUsers() {
    userList.innerHTML = '';

    sortedUsers.forEach((user, index) => {
      const item = document.createElement('li');
      item.className = 'user-item';
      item.innerHTML = `
        <div class="user-name">${user.creator}</div>
        <div class="user-total-views">${user.totalViews.toLocaleString()} total views</div>
      `;
      userList.appendChild(item);
    });
  }

  // Switch between views
  toggleButton.addEventListener('click', () => {
    if (containerVideos.style.display === 'block') {
      containerVideos.style.display = 'none';
      containerUsers.style.display = 'block';
      toggleButton.textContent = 'Switch to Top 50 Videos';
    } else {
      containerVideos.style.display = 'block';
      containerUsers.style.display = 'none';
      toggleButton.textContent = 'Switch to Most Viewed Users';
    }
  });

  // Initial render
  renderVideos();
  renderUsers();
</script>

</body>
</html>
